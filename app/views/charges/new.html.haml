- flash.each do |key, value|
  .alert.alert-danger.alert-dismissible.fade.show{:role => "alert"}
    %strong #{value}
    %button.close{"aria-label" => "Close", "data-dismiss" => "alert", :type => "button"}
      %span{"aria-hidden" => "true"} Ã—

.row
  %main.col-sm-6.col-md-6.offset-md-1
    .card
      .order
        %ul.order-list
          %li
            - if @product.cover_product.attached?
              = image_tag(@product.cover_product, :class => "img-thumbnail img-sm")
            - else
              = image_tag("https://via.placeholder.com/163", :class => "img-thumbnail img-sm")
            %h4= @product.name
            %p= @product.description
        %h5.total Price
        %h2 $ #{@product.price}
  %div.col-sm-4.col-md-4
    %h4 Payment Information
    %figure.mb-3
      .row
        .col
          .alert.alert-danger.d-none{ role: "alert", data: { name: "errorMessages"} }
          = simple_form_for(:new_charge, url: product_charges_path, wrapper: :input_group, :html => {:autocomplete => "on", :data => { name: "paymentForm" }}) do |f|
            / This form is generated by SimpleForm https://github.com/plataformatec/simple_form
            = f.input :token, as: :hidden, input_html: { data: { name: "cardToken" } }
            = f.input :card_number, prepend: "<i id='card-brand-icon' class='pf pf-credit-card'></i>".html_safe, hint: "Use a sample card number listed below", as: :tel, placeholder: "Card Number", label: false, input_html: { name: nil, id: nil, data: { name: "cardNumber", target: "card-brand-icon" } }
            .row
              .col
                = f.input :expiry, as: :tel, placeholder: "Expiry", label: false, input_html: { name: nil, id: nil, data: { name: "cardExpiry" } }
                / Uncomment to include separate inputs for expiry month and expiry year
                / = f.input :exp_month, placeholder: "Expiry Month", label: false, input_html: { name: nil, id: nil, data: { name: "expMonth" } }
                / = f.input :exp_year, placeholder: "Expiry Year", label: false, input_html: { name: nil, id: nil, data: { name: "expYear" } }
              .col
                = f.input :cvc, as: :tel, placeholder: "CVC", label: false, input_html: { name: nil, id: nil, data: { name: "cardCVC" }, maxLength: 3 }
            .row
              .col
                = f.button(:submit, "Buy", class: "btn btn-success float-right")
.row.pt-5
  .col-md-12
    = render "shared/test_cards"
= stylesheet_link_tag "payment_form"
= javascript_include_tag "payment_form"

